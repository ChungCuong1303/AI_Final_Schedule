{% extends 'base.html' %}
{% load static %}
{% load humanize %}
{% block content %}
{% if messages %}
{% for message in messages  %}
{% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
<div class="alert alert-success" style="margin-top: -20px;" role="alert"><i
        class="fa fa-check-circle"></i>&nbsp;<strong>{{ message }}</strong></div>
{% endif %}
{% if message.level == DEFAULT_MESSAGE_LEVELS.WARNING %}
<div class="alert alert-warning" style="margin-top: -20px;" role="alert"><i
        class="fa fa-exclamation-circle"></i>&nbsp;<strong>{{ message }}</strong></div>
{% endif %}
{% if message.level == DEFAULT_MESSAGE_LEVELS.INFO %}
<div class="alert alert-info" style="margin-top: -20px;" role="alert"><i
        class="fa fa-info-circle"></i>&nbsp;<strong>{{ message }}</strong></div>
{% endif %}
{% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
<div class="alert alert-danger" style="margin-top: -20px;" role="alert"><i
        class="fa fa-times-circle"></i>&nbsp;<strong>{{ message }}</strong></div>
{% endif %}
{% endfor %}
{% endif %}

<head>
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'CSS/table.css' %}">
</head>

<body>
    <div style="background: #efefef;">
        <div class="text-center">
            <h1 class="logo">Add Section</h1>
            <div class="login-form-1">
                <form id="login-form" class="text-left" method="post" action="{% url 'addsections' %}">
                    {% csrf_token %}
                    <div class="login-form-main-message"></div>
                    <div class="main-login-form">
                        <div class="login-group">
                            <div class="form-group">
                                <label for="section_id" class="sr-only">Section ID</label>
                                <input type="text" class="form-control" id="section_id" name="section_id"
                                    placeholder="Section ID" required>
                            </div>
                            <div class="form-group">
                                <label for="classes_in_week" class="sr-only">Total classes of Week</label>
                                <input type="number" class="form-control" id="classes_in_week" name="classes_in_week"
                                    placeholder="Total classes of Week" required>
                            </div>
                            <div class="form-group" style="margin-top: 5px;">
                                <label for="department" class="sr-only">Section Department</label>
                                <select id="department" name="department" class="selectpicker" title="Select Department"
                                    data-live-search="true" data-actions-box="true">
                                    <optgroup label="Department">
                                        {% for dep in list_department %}
                                        <option value="{{ dep.id }}" id="department" name="department">
                                            {{ dep.dept_name }}</option>
                                        {% endfor %}
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                        <button type="submit" class="login-button"><i class="fa fa-chevron-right"></i></button>
                    </div>
                </form>
            </div>
            <div class="text-center">
                <h1 class="logo">Section list</h1>
                <div class="container">
                    <div class="row" style="justify-content: center;">
                        <div class="col-md-10 col-md-offset-1">
                            <div class="panel panel-default panel-table">
                                <div class="panel-body">
                                    <table class="table table-striped table-bordered table-list">
                                        <thead>
                                            <tr>
                                                <th style="text-align: center;"><em class="fa fa-cog"></em></th>
                                                <th style="text-align: center;">Section ID</th>
                                                <th style="text-align: center;">Section Department</th>
                                                <th style="text-align: center;">Classes of Week</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {%  for s in section  %}
                                            <tr>
                                                <td align="center">
                                                    <form action="{% url 'deletesections' s.section_id %}"
                                                        method="post">
                                                        {% csrf_token %}
                                                        <button type="submit" class="btn btn-danger"><em
                                                                class="fa fa-trash"></em></button>
                                                    </form>
                                                    <form action="{% url 'updatesections' s.section_id %}" method="post">
                                                        {% csrf_token %}
                                                        <button type="button" class="btn btn-primary"
                                                            data-toggle="modal"
                                                            data-target="#modal-default{{s.section_id}}"><em
                                                                class="fa fa-pencil"></em></button>
                                                    </form>
                                                </td>
                                                <td class="hidden-xs">{{  s.section_id  }}</td>
                                                <td>{{ s.department }}</td>
                                                <td>{{ s.classes_in_week }}</td>
                                            </tr>
                                            <div class="modal fade" id="modal-default{{s.section_id}}" tabindex="-1"
                                                role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                <div class="modal-dialog" role="document">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h3 class="modal-title" id="exampleModalLabel">Edit Section
                                                            </h3>
                                                            <button type="button" class="close" data-dismiss="modal"
                                                                aria-label="Close">
                                                                <span aria-hidden="true">&times;</span>
                                                            </button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <form action="{% url 'updatesections' s.section_id %}"
                                                                id="login-form" method="post">
                                                                {% csrf_token %}
                                                                <div class="form-group">
                                                                    <div class="text-left">
                                                                        <h5>Section ID</h5>
                                                                    </div>
                                                                    <div>
                                                                        <label for="section_id" class="sr-only">Section
                                                                            ID</label>
                                                                        <input type="text" class="form-control"
                                                                            id="section_id" name="section_id"
                                                                            placeholder="Section ID" required
                                                                            value="{{s.section_id}}">
                                                                    </div>
                                                                    <div class="text-left">
                                                                        <h5>Section Department</h5>
                                                                    </div>
                                                                    <div style="float: left; margin-bottom: 15px;">
                                                                        <label for="department" class="sr-only"
                                                                            style="float: left;">Section
                                                                            Department</label>
                                                                        <select id="department" name="department"
                                                                            class="form-control inputstl"
                                                                            title="Select Department"
                                                                            style="width: 450px;">
                                                                            {% for dep in list_department %}
                                                                            <option value="{{ dep.id }}" {% if dep.id == s.department_id %} selected="selected" {% endif %}>
                                                                                {{ dep.dept_name }}</option>
                                                                            {% endfor %}
                                                                        </select>
                                                                    </div>
                                                                    <div class="text-left">
                                                                        <h5 style="padding-top: 10px;">Section Classes
                                                                            of Week</h5>
                                                                    </div>
                                                                    <div>
                                                                        <label for="sj_classes" class="sr-only">Section
                                                                            Classes of Week</label>
                                                                        <input type="number" class="form-control"
                                                                            id="classes_in_week" name="classes_in_week"
                                                                            placeholder="Section
                                                                            Classes of Week" required
                                                                            value="{{s.classes_in_week}}">
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">

                                                                    <button type="button" class="btn btn-secondary"
                                                                        data-dismiss="modal">Close</button>
                                                                    <button type="submit" class="btn btn-info">Save
                                                                        changes</button>
                                                                </div>
                                                        </div>
                                                        </form>
                                                    </div>

                                                </div>
                                            </div>
                                </div>
                                {%  endfor  %}
                                </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="text-center">
                        <h1 class="logo">Subject - Instructor List</h1>
                        <div class="container">
                            <div class="row" style="justify-content: center;">
                                <div class="col-md-10 col-md-offset-1">
                                    <div class="panel-body">
                                        <table class="table table-striped table-bordered table-list">
                                            <thead>
                                                <tr>
                                                    <th style="text-align: center;" class="hidden-xs">Id</th>
                                                    <th style="text-align: center;">Subject Id</th>
                                                    <th style="text-align: center;">Subject Name</th>
                                                    <th style="text-align: center;">Instructor</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {%  for i in insSub  %}
                                                <tr>
                                                    <td class="hidden-xs">{{  i.0  }}</td>
                                                    <td>{{ i.1 }}</td>
                                                    <td>{{ i.2 }}</td>
                                                    <td>{{ i.3 }}</td>
                                                </tr>
                                                {%  endfor  %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> -->
                    <!-- <script>
      $(document).ready(function () {
           $('.selectpicker').change(function () {
             var values = $('.selectpicker option:selected').map(function() {
               return this.value; // or $(this).val()
             }).get();
             
             var test = values
             console.log(test)
             var arr = []
             $.each( test, function( index, value ){
                 arr.push(value)                                                                                                                                                             
             });
             console.log(arr) ;
             $('input:text[name="sj_ins"]').val(test);
             console.log($('input:text[name="sj_ins"]').val())

           });                                                              
       });                                                        
   </script> -->
</body>

{% endblock %}